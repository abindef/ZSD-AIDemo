# 数据库表设计文档

## 1. PaymentAutoItem 表（批量付款单表）

| 字段名      | 数据类型        | 允许空值 | 主键  | 外键  | 唯一索引 | 注释       |
| -------- | ----------- | ---- | --- | --- | ---- | -------- |
| 主键ID     | 通用唯一标识符     | 否    | 是   | 否   | 否    | 主键ID     |
| 单号       | 可变长字符串(200) | 否    | 否   | 否   | 是    | 单号       |
| 单据日期     | 日期时间        | 否    | 否   | 否   | 否    | 单据日期     |
| 公司       | 通用唯一标识符     | 是    | 否   | 否   | 否    | 公司       |
| 公司名称     | 可变长字符串      | 否    | 否   | 否   | 否    | 公司名称     |
| 公司Code   | 可变长字符串      | 否    | 否   | 否   | 否    | 公司Code   |
| 备注       | 可变长字符串      | 是    | 否   | 否   | 否    | 备注       |
| 整个附言     | 可变长字符串      | 是    | 否   | 否   | 否    | 整个附言     |
| 状态       | 整数          | 否    | 否   | 否   | 否    | 状态       |
| OA请求Id   | 可变长字符串      | 是    | 否   | 否   | 否    | OA请求Id   |
| OA最后审批人  | 可变长字符串      | 是    | 否   | 否   | 否    | OA最后审批人  |
| OA最后审批时间 | 日期时间偏移量     | 是    | 否   | 否   | 否    | OA最后审批时间 |
| OA审批意见   | 可变长字符串      | 是    | 否   | 否   | 否    | OA审批意见   |
| 核算部门Id路径 | 可变长字符串      | 是    | 否   | 否   | 否    | 核算部门Id路径 |
| 核算部门名称路径 | 可变长字符串      | 是    | 否   | 否   | 否    | 核算部门名称路径 |
| 核算部门当前Id | 可变长字符串      | 是    | 否   | 否   | 否    | 核算部门当前Id |
| 附件Ids    | 可变长字符串      | 是    | 否   | 否   | 否    | 附件Ids    |
| 创建人      | 通用唯一标识符     | 是    | 否   | 否   | 否    | 创建人      |
| 创建时间     | 日期时间        | 是    | 否   | 否   | 否    | 创建时间     |
| 更新人      | 通用唯一标识符     | 是    | 否   | 否   | 否    | 更新人      |
| 更新时间     | 日期时间        | 是    | 否   | 否   | 否    | 更新时间     |
| 是否删除     | 布尔值         | 否    | 否   | 否   | 否    | 是否删除     |

## 2. PaymentAutoDetail 表（批量付款明细表）

| 字段名        | 数据类型     | 允许空值 | 主键  | 外键  | 唯一索引 | 注释                             |
| ---------- | -------- | ---- | --- | --- | ---- | ------------------------------ |
| 主键ID       | 通用唯一标识符  | 否    | 是   | 否   | 否    | 主键ID                           |
| 批量付款单Id    | 通用唯一标识符  | 否    | 否   | 是   | 否    | 批量付款单Id (关联PaymentAutoItem.Id) |
| 应付付款计划明细Id | 通用唯一标识符  | 否    | 否   | 是   | 否    | 应付付款计划明细Id (关联DebtDetail.Id)   |
| 付款单号       | 可变长字符串   | 是    | 否   | 否   | 否    | 付款单号                           |
| 付款金额       | 小数(18,2) | 否    | 否   | 否   | 否    | 付款金额                           |
| 付款时间       | 日期时间     | 是    | 否   | 否   | 否    | 付款时间                           |
| 限定折扣金额     | 小数(18,2) | 是    | 否   | 否   | 否    | 限定折扣金额                         |
| 创建人        | 通用唯一标识符  | 是    | 否   | 否   | 否    | 创建人                            |
| 创建时间       | 日期时间     | 是    | 否   | 否   | 否    | 创建时间                           |
| 更新人        | 通用唯一标识符  | 是    | 否   | 否   | 否    | 更新人                            |
| 更新时间       | 日期时间     | 是    | 否   | 否   | 否    | 更新时间                           |
| 是否删除       | 布尔值      | 否    | 否   | 否   | 否    | 是否删除                           |

## 3. PaymentAutoAgent 表（批量付款供应商表）

| 字段名           | 数据类型        | 允许空值 | 主键  | 外键  | 唯一索引 | 注释                             |
| ------------- | ----------- | ---- | --- | --- | ---- | ------------------------------ |
| 主键ID          | 通用唯一标识符     | 否    | 是   | 否   | 否    | 主键ID                           |
| 批量付款单Id       | 通用唯一标识符     | 否    | 否   | 是   | 否    | 批量付款单Id (关联PaymentAutoItem.Id) |
| 供应商Id         | 通用唯一标识符     | 是    | 否   | 否   | 否    | 供应商Id                          |
| 供应商           | 可变长字符串      | 是    | 否   | 否   | 否    | 供应商                            |
| 账号名称          | 可变长字符串      | 是    | 否   | 否   | 否    | 账号名称                           |
| 账号            | 可变长字符串      | 是    | 否   | 否   | 否    | 账号                             |
| 开户行名称         | 可变长字符串      | 是    | 否   | 否   | 否    | 开户行名称                          |
| 开户行编码         | 可变长字符串      | 是    | 否   | 否   | 否    | 开户行编码                          |
| 支付类型          | 可变长字符串(200) | 是    | 否   | 否   | 否    | 支付类型                           |
| 转账附言          | 可变长字符串      | 是    | 否   | 否   | 否    | 转账附言                           |
| 发票号           | 可变长字符串      | 是    | 否   | 否   | 否    | 发票号                            |
| 合同号           | 可变长字符串      | 是    | 否   | 否   | 否    | 合同号                            |
| 境外/跨境支付       | 整数          | 是    | 否   | 否   | 否    | 境外/跨境支付0:否,1:是                 |
| 交易编码          | 可变长字符串      | 是    | 否   | 否   | 否    | 交易编码                           |
| 交易附言          | 可变长字符串      | 是    | 否   | 否   | 否    | 交易附言                           |
| 本笔款项是否为保税货物下推 | 整数          | 是    | 否   | 否   | 否    | 本笔款项是否为保税货物下推0:否,1:是           |
| 国内外费用承担方      | 可变长字符串      | 是    | 否   | 否   | 否    | 国内外费用承担方A:汇款人,B:收款人,C:共同人      |
| 海关进口货物报关商品    | 可变长字符串      | 是    | 否   | 否   | 否    | 海关进口货物报关商品                     |
| 附件Ids         | 可变长字符串      | 是    | 否   | 否   | 否    | 附件Ids                          |
| 是否债务转移        | 布尔值         | 是    | 否   | 否   | 否    | 是否债务转移                         |
| 债务转移的供应商Id    | 通用唯一标识符     | 是    | 否   | 否   | 否    | 债务转移的供应商Id                     |
| 债务转移的供应商      | 可变长字符串(200) | 是    | 否   | 否   | 否    | 债务转移的供应商                       |
| 债务转移的账户       | 可变长字符串(200) | 是    | 否   | 否   | 否    | 债务转移的账户                        |
| 债务转移的银行账号     | 可变长字符串(200) | 是    | 否   | 否   | 否    | 债务转移的银行账号                      |
| 债务转移的银行       | 可变长字符串(200) | 是    | 否   | 否   | 否    | 债务转移的银行                        |
| 债务转移的银行名称     | 可变长字符串(200) | 是    | 否   | 否   | 否    | 债务转移的银行                        |
| 债务转移的银行代码     | 可变长字符串(200) | 是    | 否   | 否   | 否    | 债务转移的银行代码                      |
| 债务转移的附件       | 可变长字符串      | 是    | 否   | 否   | 否    | 债务转移的附件                        |
| 集团业务付款ID      | 整数          | 是    | 否   | 否   | 否    | 集团业务付款ID                       |
| 创建人           | 通用唯一标识符     | 是    | 否   | 否   | 否    | 创建人                            |
| 创建时间          | 日期时间        | 是    | 否   | 否   | 否    | 创建时间                           |
| 更新人           | 通用唯一标识符     | 是    | 否   | 否   | 否    | 更新人                            |
| 更新时间          | 日期时间        | 是    | 否   | 否   | 否    | 更新时间                           |
| 是否删除          | 布尔值         | 否    | 否   | 否   | 否    | 是否删除                           |

## 4. Company 表（公司基础数据表）

| 字段名   | 数据类型        | 允许空值 | 主键  | 外键  | 唯一索引 | 注释                 |
| ----- | ----------- | ---- | --- | --- | ---- | ------------------ |
| 主键ID  | 通用唯一标识符     | 否    | 是   | 否   | 否    | 公司主键              |
| 公司Code | 可变长字符串(50)  | 否    | 否   | 否   | 是    | 公司编码（业务唯一）         |
| 公司名称 | 可变长字符串(200) | 否    | 否   | 否   | 否    | 公司名称              |
| 状态    | 整数          | 否    | 否   | 否   | 否    | 状态（示例：0禁用,1启用） |
| 创建时间 | 日期时间        | 是    | 否   | 否   | 否    | 创建时间              |
| 更新时间 | 日期时间        | 是    | 否   | 否   | 否    | 更新时间              |
| 是否删除 | 布尔值         | 否    | 否   | 否   | 否    | 是否删除              |

建议索引：

- `UK_Company_Code(公司Code)`

## 5. Agent 表（供应商基础数据表）

| 字段名     | 数据类型        | 允许空值 | 主键  | 外键  | 唯一索引 | 注释                 |
| ------- | ----------- | ---- | --- | --- | ---- | ------------------ |
| 主键ID    | 通用唯一标识符     | 否    | 是   | 否   | 否    | 供应商主键             |
| 供应商Code | 可变长字符串(50)  | 否    | 否   | 否   | 是    | 供应商编码（业务唯一）        |
| 供应商名称  | 可变长字符串(200) | 否    | 否   | 否   | 否    | 供应商名称             |
| 银行账号名称 | 可变长字符串(200) | 是    | 否   | 否   | 否    | 银行账号名称            |
| 银行账号   | 可变长字符串(100) | 是    | 否   | 否   | 否    | 银行账号              |
| 开户行名称  | 可变长字符串(200) | 是    | 否   | 否   | 否    | 开户行名称             |
| 开户行编码  | 可变长字符串(50)  | 是    | 否   | 否   | 否    | 开户行编码             |
| 状态      | 整数          | 否    | 否   | 否   | 否    | 状态（示例：0禁用,1启用） |
| 创建时间    | 日期时间        | 是    | 否   | 否   | 否    | 创建时间              |
| 更新时间    | 日期时间        | 是    | 否   | 否   | 否    | 更新时间              |
| 是否删除    | 布尔值         | 否    | 否   | 否   | 否    | 是否删除              |

建议索引：

- `UK_Agent_Code(供应商Code)`
- `IX_Agent_Name(供应商名称)`

## 6. 模拟数据（演示用）

### 6.1 公司模拟数据（Company）

| 主键ID | 公司Code | 公司名称 | 状态 |


### 6.2 供应商模拟数据（Agent）

| 主键ID | 供应商Code | 供应商名称 | 银行账号名称 | 银行账号 | 开户行名称 | 开户行编码 | 状态 |


### 6.3 应付表初始化（不同类型应付数据示例）

说明：应付数据通常来源于业务系统或外部集成（如：应付/采购/费用），此处仅提供演示初始化样例，字段与含义参考用户故事。

| 应付ID | 应付单号 | 核算部门Id路径 | 核算部门名称路径 | 核算部门当前Id | 公司Id | 公司名称 | 公司Code | 供应商ID | 供应商名称 | 应付单据类型 | 业务单元 | 客户 | 币种 | 采购合同号 | 项目名称 |

应付单据类型包括（预付账期、入库账期、销售账期、回款账期、验收账期、质保账期）

## 表关系说明

1. **PaymentAutoItem** 与 **PaymentAutoDetail** 是一对多关系：
   
   - PaymentAutoItem.Id = PaymentAutoDetail.PaymentAutoItemId

2. **PaymentAutoItem** 与 **PaymentAutoAgent** 是一对多关系：
   
   - PaymentAutoItem.Id = PaymentAutoAgent.PaymentAutoItemId

3. **PaymentAutoDetail** 与 **DebtDetail** 是多对一关系:
   
   - PaymentAutoDetail.DebtDetilId = DebtDetail.Id

4. **PaymentAutoItem** 与 **Company** 建议建立外键关系：

   - PaymentAutoItem.CompanyId = Company.Id

5. **PaymentAutoAgent** 与 **Agent** 建议建立外键关系：

   - PaymentAutoAgent.AgentId = Agent.Id