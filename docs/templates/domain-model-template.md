# 领域模型文档模板

> Domain Expert 输出领域模型的标准化模板

---

## 元信息

| 字段 | 值 |
|------|-----|
| **模块名称** | [必填] |
| **限界上下文** | [必填] |
| **版本** | [必填] |
| **最后更新** | [日期] |
| **责任人** | [Domain Expert] |

---

## 一、业务需求概述

### 1.1 业务目标
[简要描述该模块要解决的业务问题]

### 1.2 核心用例
| 用例编号 | 用例名称 | 参与者 | 前置条件 | 主成功场景 |
|----------|----------|--------|----------|------------|
| UC-001 | [必填] | [角色] | [条件] | [描述] |

### 1.3 术语引用
> 本文档使用的术语定义见 [统一术语表](../glossary.md)

---

## 二、聚合设计

### 2.1 聚合根：[聚合名称]

```
┌─────────────────────────────────────────────────┐
│ [AggregateRoot]                                 │
│ ┌─────────────────────────────────────────────┐ │
│ │ 聚合根: [类名]                               │ │
│ │ - 标识: [Id类型]                            │ │
│ │ - 属性: [关键属性列表]                       │ │
│ ├─────────────────────────────────────────────┤ │
│ │ 实体:                                       │ │
│ │ - [Entity1]: [描述]                         │ │
│ │ - [Entity2]: [描述]                         │ │
│ ├─────────────────────────────────────────────┤ │
│ │ 值对象:                                     │ │
│ │ - [ValueObject1]: [描述]                    │ │
│ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

#### 属性定义

| 属性名 | 类型 | 必填 | 说明 | 业务规则 |
|--------|------|------|------|----------|
| Id | [类型] | 是 | 唯一标识 | - |
| [属性] | [类型] | [是/否] | [说明] | [规则编号] |

#### 不变量（Invariants）

| 编号 | 不变量描述 | 校验时机 |
|------|------------|----------|
| INV-001 | [必填：聚合内必须始终满足的条件] | [创建/修改] |

#### 行为方法

| 方法名 | 参数 | 返回值 | 业务规则 | 触发事件 |
|--------|------|--------|----------|----------|
| [方法] | [参数列表] | [类型] | [规则编号] | [事件名] |

---

## 三、实体定义

### 3.1 实体：[实体名称]

| 属性名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Id | [类型] | 是 | 实体标识 |
| [属性] | [类型] | [是/否] | [说明] |

**生命周期**：[描述实体的创建、修改、删除规则]

---

## 四、值对象定义

### 4.1 值对象：[值对象名称]

| 字段 | 类型 | 说明 | 校验规则 |
|------|------|------|----------|
| [字段] | [类型] | [说明] | [规则] |

**相等性**：[描述值对象的相等性判断规则]

**示例**：
```csharp
// 创建示例
var money = Money.Create(100.00m, taxRate: 13);
```

---

## 五、领域服务

### 5.1 服务：[服务名称]

| 字段 | 值 |
|------|-----|
| **职责** | [描述该服务的职责] |
| **无状态** | 是 |
| **依赖** | [列举依赖的仓储或其他服务] |

#### 方法定义

| 方法名 | 输入 | 输出 | 业务规则 |
|--------|------|------|----------|
| [方法] | [参数] | [返回] | [规则编号] |

---

## 六、领域事件

### 6.1 事件：[事件名称]

| 字段 | 值 |
|------|-----|
| **触发时机** | [描述何时发布此事件] |
| **发布者** | [聚合根名称] |
| **订阅者** | [列举订阅此事件的服务] |

#### 事件数据

| 字段 | 类型 | 说明 |
|------|------|------|
| [字段] | [类型] | [说明] |

---

## 七、仓储接口

### 7.1 仓储：I[聚合根]Repository

| 方法 | 签名 | 说明 |
|------|------|------|
| GetByIdAsync | `Task<T?> GetByIdAsync(TId id)` | 按ID查询 |
| AddAsync | `Task AddAsync(T entity)` | 新增 |
| UpdateAsync | `Task UpdateAsync(T entity)` | 更新 |
| [其他方法] | [签名] | [说明] |

---

## 八、业务规则清单

| 规则编号 | 规则描述 | 所属聚合 | 校验位置 | 违反后果 |
|----------|----------|----------|----------|----------|
| BR-001 | [必填] | [聚合名] | [Domain/Application] | [异常/拒绝] |

---

## 九、状态流转图

```
[初始状态] ──[事件/操作]──▶ [目标状态]
     │                         │
     └────[条件]──────────────┘
```

---

## 十、交付物检查清单

- [ ] 所有聚合根已定义不变量
- [ ] 所有实体已定义生命周期
- [ ] 所有值对象已定义相等性规则
- [ ] 所有业务规则已编号
- [ ] 所有领域事件已定义触发时机
- [ ] 术语与统一术语表一致
