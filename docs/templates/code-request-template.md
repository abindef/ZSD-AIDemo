# 代码生成请求模板

> 向AI请求生成代码时的标准化模板，确保输出可运行、可验证

---

## 元信息

| 字段 | 值 |
|------|-----|
| **请求类型** | [新增功能 / 修改功能 / Bug修复 / 重构] |
| **目标模块** | [模块名称] |
| **关联领域模型** | [链接到领域模型文档] |
| **请求人** | [角色] |
| **日期** | [日期] |

---

## 一、需求描述（精炼）

### 1.1 业务目标
[一句话描述要实现什么业务目标]

### 1.2 用户故事
```
作为 [角色]
我希望 [功能]
以便 [价值]
```

### 1.3 验收标准
| 编号 | 验收条件 | 验证方式 |
|------|----------|----------|
| AC-001 | [必填：具体可验证的条件] | [单元测试/集成测试/手动验证] |

---

## 二、数据结构定义

### 2.1 输入数据

```csharp
// Command/Request 定义
public record [CommandName]
{
    /// <summary>[字段说明]</summary>
    [Required]
    public [Type] [PropertyName] { get; init; }
    
    // ... 其他字段
}
```

**字段说明**：

| 字段 | 类型 | 必填 | 校验规则 | 示例值 |
|------|------|------|----------|--------|
| [字段] | [类型] | [是/否] | [规则] | [示例] |

### 2.2 输出数据

```csharp
// Response/DTO 定义
public record [ResponseName]
{
    public [Type] [PropertyName] { get; init; }
    // ... 其他字段
}
```

### 2.3 领域事件（如有）

```csharp
public record [EventName] : DomainEvent
{
    public [Type] [PropertyName] { get; init; }
}
```

---

## 三、接口定义

### 3.1 API接口（如需暴露）

| 字段 | 值 |
|------|-----|
| **路径** | `[HTTP Method] /api/v1/[resource]` |
| **认证** | [需要/不需要] |
| **权限** | [权限代码] |

**请求示例**：
```json
{
  "field1": "value1"
}
```

**响应示例**：
```json
{
  "success": true,
  "data": {}
}
```

### 3.2 应用服务接口

```csharp
public interface I[ServiceName]
{
    /// <summary>[方法说明]</summary>
    /// <param name="command">[参数说明]</param>
    /// <returns>[返回说明]</returns>
    Task<Result<[ResponseType]>> [MethodName]Async([CommandType] command);
}
```

---

## 四、边界条件

### 4.1 正常场景

| 场景编号 | 场景描述 | 输入 | 期望输出 |
|----------|----------|------|----------|
| S-001 | [必填] | [数据] | [结果] |

### 4.2 边界场景

| 场景编号 | 场景描述 | 输入 | 期望输出 |
|----------|----------|------|----------|
| B-001 | 空值处理 | [null/空] | [结果] |
| B-002 | 最大值 | [最大值] | [结果] |
| B-003 | 最小值 | [最小值] | [结果] |

### 4.3 异常场景

| 场景编号 | 场景描述 | 触发条件 | 期望行为 |
|----------|----------|----------|----------|
| E-001 | [必填] | [条件] | [抛出异常/返回错误] |

### 4.4 并发场景（如适用）

| 场景编号 | 场景描述 | 处理策略 |
|----------|----------|----------|
| C-001 | [描述] | [乐观锁/悲观锁/幂等] |

---

## 五、业务规则引用

| 规则编号 | 规则描述 | 来源 |
|----------|----------|------|
| BR-XXX | [规则描述] | [领域模型文档链接] |

---

## 六、代码位置约束

| 代码类型 | 目标路径 | 命名规范 |
|----------|----------|----------|
| 聚合根 | `src/Domain/Aggregates/[Module]/` | `[Name].cs` |
| 值对象 | `src/Domain/ValueObjects/` | `[Name].cs` |
| 领域事件 | `src/Domain/Events/` | `[Name]Event.cs` |
| 应用服务 | `src/Application/Services/` | `[Name]Service.cs` |
| Controller | `src/Host.Backend/Controllers/` | `[Name]Controller.cs` |
| 单元测试 | `tests/Domain.Tests/` | `[Name]Tests.cs` |

---

## 七、验证方式

### 7.1 单元测试要求

```csharp
// 测试用例模板
[Fact]
public void [MethodName]_[Scenario]_[ExpectedResult]()
{
    // Arrange
    [准备数据]
    
    // Act
    [执行操作]
    
    // Assert
    [验证结果]
}
```

**必须覆盖的测试场景**：
- [ ] 正常场景 S-001 ~ S-XXX
- [ ] 边界场景 B-001 ~ B-XXX
- [ ] 异常场景 E-001 ~ E-XXX

### 7.2 集成测试要求（如适用）

| 测试类型 | 测试内容 | 验证点 |
|----------|----------|--------|
| API测试 | [接口路径] | [响应状态/数据] |
| 事件测试 | [事件名] | [订阅者处理] |

### 7.3 手动验证步骤（如适用）

1. [步骤1]
2. [步骤2]
3. [预期结果]

---

## 八、依赖说明

### 8.1 内部依赖

| 依赖项 | 类型 | 说明 |
|--------|------|------|
| [类名] | [仓储/服务] | [用途] |

### 8.2 外部依赖

| 依赖项 | 版本 | 用途 |
|--------|------|------|
| [包名] | [版本] | [用途] |

---

## 九、请求检查清单

- [ ] 需求描述清晰，有明确验收标准
- [ ] 数据结构已定义，包含校验规则
- [ ] 边界条件已列举完整
- [ ] 业务规则已引用领域模型
- [ ] 代码位置已明确
- [ ] 验证方式已定义
